# ブランチ戦略 (Updated)

このドキュメントでは、`etheria` プロジェクトにおけるブランチ戦略を定義します。以下の戦略に基づき、コードの管理・統合を円滑に進めることを目的としています。

## 1. 基本的なブランチ構成

以下の主要ブランチを定義します。

### 1.1 `main` ブランチ
- **目的**: 常に安定した状態を保つためのブランチです。リリース準備が整ったコードのみがマージされます。
- **運用方法**: 本番環境へのデプロイはこのブランチから行います。

### 1.2 `develop` ブランチ
- **目的**: 新しい機能の開発や、バグ修正が行われる統合ブランチです。すべての新機能はこのブランチにマージされます。
- **運用方法**: 開発が終了した機能は、まず `develop` ブランチにマージし、次に `main` ブランチへ統合されます。毎日の作業はこのブランチを基に行います。

### 1.3 `feature/` プレフィックス
- **目的**: 新しい機能や機能強化を行うためのブランチです。`develop` ブランチから派生します。
- **運用方法**: 新機能開発や既存機能の改良を行う際に使用します。作業が完了したら、`develop` ブランチにマージします。

#### 例: 
- `feature/user-authentication` (ユーザー認証機能)
- `feature/payment-integration` (決済機能統合)

### 1.4 `bugfix/` プレフィックス
- **目的**: バグ修正専用のブランチです。`develop` ブランチから派生し、バグが修正された後、`develop` にマージします。
- **運用方法**: バグの修正が完了したら、`develop` に統合し、リリース前にテストを行います。

#### 例:
- `bugfix/fix-login-error` (ログインエラー修正)

### 1.5 `hotfix/` プレフィックス
- **目的**: 本番環境で発生した重大なバグや緊急修正を行うためのブランチです。`main` ブランチから直接派生し、修正後は `main` と `develop` の両方にマージします。
- **運用方法**: 本番環境での問題を解決した後、即座に本番に反映させるために使用します。

#### 例:
- `hotfix/fix-critical-bug` (重大なバグ修正)

### 1.6 `chore/` プレフィックス
- **目的**: コードのリファクタリング、依存関係の更新、ビルド設定の変更など、機能追加やバグ修正以外の変更を行うためのブランチです。`develop` ブランチから派生します。
- **運用方法**: 開発作業に影響しない、補助的な変更を行う際に使用します。

#### 例:
- `chore/update-dependencies` (依存関係の更新)
- `chore/refactor-code` (コードリファクタリング)

### 1.7 `docs/` プレフィックス
- **目的**: ドキュメントの更新や改善を行うためのブランチです。`develop` ブランチから派生します。
- **運用方法**: 開発や変更に伴うドキュメントの更新作業を行う際に使用します。

#### 例:
- `docs/update-readme` (README更新)
- `docs/add-api-docs` (APIドキュメント追加)

## 2. ワークフロー

### 2.1 ブランチ作成の流れ
- `main` ブランチから `develop` ブランチを作成します。以後、すべての開発作業は `develop` ブランチをベースに進めます。
- 新しい機能やバグ修正は、`develop` ブランチから派生した `feature/` や `bugfix/` ブランチで作業を行い、完了したら `develop` にマージします。
- 本番環境の緊急対応が必要な場合は、`main` ブランチから直接 `hotfix/` ブランチを作成し、修正後に両方のブランチにマージします。

### 2.2 プルリクエストの流れ
- `feature/` や `bugfix/` ブランチで作業が完了したら、`develop` ブランチへのプルリクエストを作成します。
- プルリクエストは、コードレビューを受け、問題がない場合にマージされます。

### 2.3 コードレビューとテスト
- プルリクエストを作成する前に、ローカルで単体テストと統合テストを必ず実行してください。
- プルリクエストは、レビュアーがコードを確認し、必要に応じてコメントを行います。すべての指摘を解決し、再レビューを経てマージされます。

### 2.4 デプロイ
- `develop` ブランチはステージング環境にデプロイされ、本番環境へのデプロイは `main` ブランチから行われます。
- `hotfix/` ブランチで修正した内容は即座に本番にデプロイされます。

## 3. ブランチの削除
- 開発が完了した後、`feature/` や `bugfix/` ブランチは `develop` にマージ後に削除します。
- `hotfix/` ブランチも同様に、修正後に `main` と `develop` にマージし、削除します。

## 4. Gitフローの徹底
- 上記のブランチ運用を遵守し、できるだけ一貫性のある開発を行ってください。
- ブランチ名のプレフィックス（`feature/`、`bugfix/`、`hotfix/`）は、機能や修正の内容に応じて適切に命名してください。

---

このブランチ戦略を基に、効率的かつ効果的な開発フローを構築してください。プロジェクトが進行する中で、必要に応じて戦略を見直すことも重要です。
